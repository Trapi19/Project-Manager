/* styles-print.css
   Estilos de impresión extraídos de styles-base.css para mejorar la legibilidad del CSS de pantalla.
*/

@media print {
    @page { margin: 1.5cm; size: A4; }
    
    body { 
        background-color: white !important; 
        margin: 0; padding: 0; 
        -webkit-print-color-adjust: exact; print-color-adjust: exact; 
        font-size: 12px !important;
    }

    /* Forzar PDF en blanco (independiente del modo oscuro) */
    html, body { background: #fff !important; background-color: #fff !important; color: #000 !important; }
    .theme-dark { --bg: #fff; --bg-gradient: none; --text: #000; --muted: #444; --surface: #fff; --surface-2: #fff; --border: #ccc; --shadow: rgba(0,0,0,0); }
    .bg-white, .bg-white\/70, .bg-white\/80, .bg-gray-50, .bg-slate-50 { background: #fff !important; background-color: #fff !important; }
    .text-gray-900, .text-gray-800, .text-gray-700, .text-gray-600, .text-gray-500, .text-gray-400, .text-slate-600 { color: #000 !important; }
    .border-gray-200, .border-gray-300, .border-slate-200, .border { border-color: #ccc !important; }
    
    .no-print { display: none !important; }

    /* Ocultar indicadores de sesión y sincronización (elementos "fixed" inyectados por JS) */
    #unitecnic-auth-badge,
    #gp-sync-indicator { display: none !important; }

    /* Campos internos (no deben aparecer al imprimir o generar PDF oficial) */
    .internal-only { display: none !important; }

    #root { margin: 0; padding: 0; width: 100% !important; max-width: 100% !important; }
    
    /* Contenedores y Layout */
    .print-container { 
        padding: 0 !important; margin: 0 !important; 
        max-width: 100% !important; box-shadow: none !important; border: none !important; 
        background: #fff !important;
    }

    /* Cabecera Forzada a Horizontal */
    .print-header { 
        display: flex !important; flex-direction: row !important; 
        justify-content: space-between !important; align-items: center !important;
        border-bottom: 2px solid #000 !important; 
        padding-bottom: 20px !important; margin-bottom: 30px !important; 
        page-break-inside: avoid;
    }

    .header-left-part { width: 65% !important; display: flex !important; align-items: center !important; }
    .header-right-part { width: 30% !important; display: flex !important; justify-content: flex-end !important; align-items: center !important; }

    img.logo-print { max-height: 50px !important; width: auto !important; object-fit: contain !important; }

    /* Tablas */
    table { width: 100% !important; border-collapse: collapse !important; font-size: 11.5px !important; table-layout: fixed !important; }
    th, td { border: 1px solid #ddd !important; padding: 6px !important; page-break-inside: avoid; vertical-align: top !important; word-break: break-word !important; }
    th { background-color: #f3f4f6 !important; color: black !important; font-weight: bold !important; white-space: nowrap !important; }
    
    /* Anchos de columnas específicos */
    th:nth-child(1), td:nth-child(1) { width: 18% !important; } /* Área */
    th:nth-child(2), td:nth-child(2) { width: 24% !important; } /* Tarea */
    th:nth-child(3), td:nth-child(3) { width: 14% !important; } /* Estado */
    th:nth-child(4), td:nth-child(4) { width: 28% !important; } /* Detalles */
    th:nth-child(5), td:nth-child(5) { width: 8% !important; }  /* Inicio */
    th:nth-child(6), td:nth-child(6) { width: 8% !important; }  /* Límite */

/* Píldoras de estado en PDF (ajuste fino para A4) */
.status-pill {
    min-width: auto !important;
    max-width: 100% !important;

    padding: 2px 6px !important;
    height: auto !important;

    font-size: 9px !important;
    line-height: 1.1 !important;

    border-radius: 9999px !important;
    box-shadow: none !important;
    border: 1px solid #ccc !important;

    white-space: nowrap !important;
    display: inline-block !important;
    text-align: center !important;
}

    /* Limpieza general de UI para papel */
    .shadow-sm, .border { box-shadow: none !important; border: none !important; }
    table .border, table th, table td { border: 1px solid #ccc !important; }
    h1 { font-size: 20px !important; margin: 0 !important; }
    p { font-size: 12px !important; color: #444 !important; }
    
    /* Ocultar iconos de FontAwesome */
    i.fas, i.far, i.fab, i.fa { display: none !important; }
    
    /* Fixes de espaciado Tailwind */
    .min-h-screen { min-height: auto !important; }
    .h-screen { height: auto !important; }
    .overflow-hidden { overflow: visible !important; }
    .bg-gray-50, .bg-blue-50, .bg-orange-50, .bg-green-50, .bg-slate-50 { background: #fff !important; }
}

@media print {
    .theme-fab { display: none !important; }
}

/* --- Print fixes: status pills (píldoras de estado) --- */
.status-pill{
  /* Keep consistent visual size in PDF */
  min-width: 90px !important;
  height: 18px !important;

  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;

  /* Improve legibility */
  font-weight: 600 !important;
  letter-spacing: 0.2px !important;
}

/* Ensure text stays readable even if the page is in dark theme */
@media print{
  .theme-dark .status-default,
  .theme-dark .status-next,
  .theme-dark .status-pending,
  .theme-dark .status-inprogress,
  .theme-dark .status-completed{
    color: #111 !important;
  }

  /* Ask the browser to print backgrounds when possible */
  .status-default,
  .status-next,
  .status-pending,
  .status-inprogress,
  .status-completed{
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
}
/* =========================
   PRINT IMPROVEMENTS (v2)
   Objetivo: reducir espacios en blanco, evitar que las fechas se partan en varias líneas,
   y mejorar el ajuste de la tabla a A4.
   ========================= */

@media print {
  /* Márgenes algo más compactos para ganar vertical */
  @page { margin: 1cm; size: A4; }

  /* Ritmo vertical más compacto */
  .print-header{
    padding-bottom: 12px !important;
    margin-bottom: 16px !important;
  }

  h1 { font-size: 18px !important; }
  h2, h3 { margin-top: 10px !important; margin-bottom: 6px !important; }

  /* Si usas utilidades tipo Tailwind, estas reglas suelen reducir “aire” sin romper layout */
  .p-6 { padding: 12px !important; }
  .p-8 { padding: 16px !important; }
  .py-8 { padding-top: 16px !important; padding-bottom: 16px !important; }
  .py-10, .py-12 { padding-top: 18px !important; padding-bottom: 18px !important; }
  .mt-8 { margin-top: 16px !important; }
  .mb-8 { margin-bottom: 16px !important; }

  /* Tailwind space-y (si aplica) */
  .space-y-6 > :not([hidden]) ~ :not([hidden]) { margin-top: 12px !important; }
  .space-y-8 > :not([hidden]) ~ :not([hidden]) { margin-top: 16px !important; }

  /* Tabla: mejora de wrapping y anchos */
  table{
    font-size: 11px !important;
  }

  th, td{
    /* break-word hace que “01-01-2026” se rompa; usamos un wrapping más controlado */
    word-break: normal !important;
    overflow-wrap: anywhere !important;
    padding: 5px !important;
  }

  /* Evitar que una fila se parta entre páginas */
  tr { page-break-inside: avoid !important; }

  /* Rebalanceo de anchos: ganamos espacio para INICIO/LÍMITE */
  th:nth-child(1), td:nth-child(1) { width: 17% !important; } /* Área */
  th:nth-child(2), td:nth-child(2) { width: 23% !important; } /* Tarea */
  th:nth-child(3), td:nth-child(3) { width: 14% !important; } /* Estado */
  th:nth-child(4), td:nth-child(4) { width: 26% !important; } /* Detalles */
  th:nth-child(5), td:nth-child(5) { width: 10% !important; } /* Inicio */
  th:nth-child(6), td:nth-child(6) { width: 10% !important; } /* Límite */

  /* Fechas: nunca partir en líneas */
  th:nth-child(5), td:nth-child(5),
  th:nth-child(6), td:nth-child(6){
    white-space: nowrap !important;
    overflow-wrap: normal !important;
    text-align: center !important;
    font-variant-numeric: tabular-nums !important;
  }

  /* Píldoras: priorizar ajuste al contenido en impresión */
  .status-pill{
    min-width: auto !important;
    height: auto !important;
    padding: 2px 6px !important;
    font-size: 9px !important;
  }
}
/* =========================
   PRINT FIXES (v3)
   - Fechas: evitar solapes (layout auto + más ancho/menos padding + fuente menor)
   - Circular progress: forzar color del texto del % en SVG/canvas-like UIs
   ========================= */

@media print {
  /* TABLA: dejar que el navegador asigne anchos según contenido */
  table { table-layout: auto !important; }

  /* Más control para que no se "pisen" textos */
  th, td {
    line-height: 1.15 !important;
  }

  /* Columnas de fechas: no-wrap + fuente y padding más compactos */
  th:nth-child(5), td:nth-child(5),
  th:nth-child(6), td:nth-child(6){
    white-space: nowrap !important;
    font-size: 10px !important;
    padding: 4px 3px !important;
  }

  /* Si aun así van justas, dales algo más de ancho */
  th:nth-child(5), td:nth-child(5) { width: 12% !important; }
  th:nth-child(6), td:nth-child(6) { width: 12% !important; }

  /* Compensación (reduce un poco Detalles para ganar a fechas) */
  th:nth-child(4), td:nth-child(4) { width: 22% !important; }

  /* PROGRESS RING: el porcentaje suele ser texto dentro de SVG; en print a veces queda muy claro */
  svg text, svg tspan {
    fill: #000 !important;
    opacity: 1 !important;
  }

  /* Si el % se pinta con clases tipo Tailwind (text-slate-xxx, text-gray-xxx), forza negro */
  .text-slate-300, .text-slate-400, .text-slate-500,
  .text-gray-300, .text-gray-400, .text-gray-500,
  .text-neutral-300, .text-neutral-400, .text-neutral-500 {
    color: #000 !important;
  }

  /* Asegura que se impriman colores/fondos del SVG si el navegador lo permite */
  svg, svg * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
}
